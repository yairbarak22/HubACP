<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HubACP Documentation - Complete Guide</title>
    <meta name="description" content="Complete documentation for HubACP - Learn how to integrate AI-powered commerce into your WooCommerce store.">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="docs.css">
</head>
<body>
    <!-- Header & Navigation -->
    <header class="header" id="header">
        <nav class="nav-container">
            <div class="logo">
                <a href="index.html" class="logo-link">
                    <span class="logo-text">HubACP</span>
                </a>
            </div>

            <!-- Desktop Navigation -->
            <ul class="nav-links">
                <li><a href="index.html#how-it-works">How It Works</a></li>
                <li><a href="index.html#features">Features</a></li>
                <li><a href="index.html#pricing">Pricing</a></li>
                <li><a href="docs.html" class="active">Docs</a></li>
            </ul>

            <!-- Desktop CTA -->
            <div class="nav-actions">
                <a href="https://wordpress.org/plugins/hubacp/" class="btn-secondary">Download Free Version</a>
                <a href="index.html#pricing" class="btn-primary">Get Pro</a>
            </div>

            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </nav>

        <!-- Mobile Navigation Overlay -->
        <div class="mobile-menu" id="mobile-menu">
            <div class="mobile-menu-content">
                <button class="mobile-menu-close" id="mobile-menu-close" aria-label="Close menu">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
                <ul class="mobile-nav-links">
                    <li><a href="index.html#how-it-works" class="mobile-nav-link">How It Works</a></li>
                    <li><a href="index.html#features" class="mobile-nav-link">Features</a></li>
                    <li><a href="index.html#pricing" class="mobile-nav-link">Pricing</a></li>
                    <li><a href="docs.html" class="mobile-nav-link active">Docs</a></li>
                </ul>
                <div class="mobile-nav-cta">
                    <a href="https://wordpress.org/plugins/hubacp/" class="btn-secondary btn-large mobile-nav-link">Download Free Version</a>
                    <a href="index.html#pricing" class="btn-primary btn-large mobile-nav-link">Get Pro</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Documentation Container -->
    <div class="docs-container">
        <!-- Sidebar Navigation -->
        <aside class="docs-sidebar">
            <nav class="docs-nav">
                <h3 class="docs-nav-title">Documentation</h3>
                <ul class="docs-nav-list">
                    <li><a href="#getting-started" class="docs-nav-link">Getting Started</a></li>
                    <li><a href="#installation" class="docs-nav-link">Installation</a></li>
                    <li><a href="#configuration" class="docs-nav-link">Configuration</a></li>
                    <li><a href="#api-overview" class="docs-nav-link">API Overview</a></li>
                    <li><a href="#authentication" class="docs-nav-link">Authentication</a></li>
                    <li><a href="#endpoints" class="docs-nav-link">API Endpoints</a></li>
                    <li><a href="#webhooks" class="docs-nav-link">Webhooks</a></li>
                    <li><a href="#security" class="docs-nav-link">Security</a></li>
                    <li><a href="#examples" class="docs-nav-link">Code Examples</a></li>
                    <li><a href="#troubleshooting" class="docs-nav-link">Troubleshooting</a></li>
                    <li><a href="#faq" class="docs-nav-link">FAQ</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Documentation Content -->
        <main class="docs-content">
            <!-- Introduction -->
            <section id="introduction" class="docs-section">
                <h1>HubACP Documentation</h1>
                <p class="lead">Welcome to the complete guide for HubACP - ChatGPT Commerce for WooCommerce. Transform your WooCommerce store into an AI-ready commerce platform that enables ChatGPT to browse products and complete purchases through conversational commerce.</p>

                <div class="docs-callout docs-callout-info">
                    <h4>What is HubACP?</h4>
                    <p>HubACP provides a secure REST API compatible with OpenAI's Agentic Commerce Protocol (ACP). It enables ChatGPT and other AI agents to:</p>
                    <ul>
                        <li><strong>Browse your product catalog</strong> - Search, filter, and discover products in real-time</li>
                        <li><strong>Create shopping carts</strong> - Add items and manage checkout sessions</li>
                        <li><strong>Calculate shipping & taxes</strong> - Get accurate costs based on customer location</li>
                        <li><strong>Complete purchases</strong> - Process payments and create WooCommerce orders</li>
                        <li><strong>Receive order updates</strong> - Real-time webhooks for order events (Pro only)</li>
                    </ul>
                </div>
            </section>

            <!-- Getting Started -->
            <section id="getting-started" class="docs-section">
                <h2>Getting Started</h2>
                <p>HubACP enables ChatGPT to interact with your WooCommerce store through a secure REST API. This guide will help you get up and running in 5 minutes.</p>

                <div class="docs-callout docs-callout-info">
                    <h4>Requirements</h4>
                    <ul>
                        <li><strong>PHP 8.1+</strong> - Required for modern security features</li>
                        <li><strong>WordPress 6.5+</strong> - Latest version recommended</li>
                        <li><strong>WooCommerce 8.0+</strong> - Must be active and configured</li>
                        <li><strong>SSL Certificate</strong> - HTTPS required for production (security)</li>
                        <li><strong>OpenAI Merchant Account</strong> - Free registration required</li>
                    </ul>
                </div>

                <h3>Quick Start (5 Minutes)</h3>
                <ol class="docs-list">
                    <li><strong>Install HubACP</strong> - Download and activate the plugin</li>
                    <li><strong>Run Setup Wizard</strong> - Beautiful animated wizard guides you through setup</li>
                    <li><strong>Register with OpenAI</strong> - Get approved as a merchant (free)</li>
                    <li><strong>Generate API Credentials</strong> - Create your signing secret</li>
                    <li><strong>Test Integration</strong> - Use built-in diagnostic tools to verify everything works</li>
                </ol>
            </section>

            <!-- Installation -->
            <section id="installation" class="docs-section">
                <h2>Installation</h2>

                <h3>Option 1: Install from WordPress.org (Free Version)</h3>
                <ol class="docs-list">
                    <li>Log in to your WordPress admin panel</li>
                    <li>Navigate to <strong>Plugins → Add New</strong></li>
                    <li>Search for "HubACP"</li>
                    <li>Click <strong>Install Now</strong> and then <strong>Activate</strong></li>
                </ol>

                <h3>Option 2: Manual Installation</h3>
                <ol class="docs-list">
                    <li>Download the plugin ZIP file from <a href="https://wordpress.org/plugins/hubacp/" target="_blank">WordPress.org</a></li>
                    <li>Navigate to <strong>Plugins → Add New → Upload Plugin</strong></li>
                    <li>Choose the downloaded ZIP file and click <strong>Install Now</strong></li>
                    <li>Click <strong>Activate Plugin</strong></li>
                </ol>

                <h3>Option 3: Pro Version ($12/month)</h3>
                <p>The Pro version unlocks unlimited products, full checkout integration, payment processing, and webhooks.</p>
                <ol class="docs-list">
                    <li>Purchase Pro license via Freemius secure checkout</li>
                    <li>Download the Pro version ZIP file</li>
                    <li>Navigate to <strong>Plugins → Add New → Upload Plugin</strong></li>
                    <li>Upload and activate (Pro overrides Free version)</li>
                    <li>License activates automatically - no manual key entry needed</li>
                </ol>

                <h3>First-Time Setup Wizard</h3>
                <p>On first activation, HubACP launches a beautiful setup wizard that guides you through:</p>
                <ul class="docs-list">
                    <li><strong>Step 1: Welcome</strong> - Introduction to HubACP capabilities</li>
                    <li><strong>Step 2: OpenAI Registration</strong> - Link to merchant approval form</li>
                    <li><strong>Step 3: API Configuration</strong> - Generate and copy your signing secret</li>
                    <li><strong>Step 4: Next Steps</strong> - Quick links to test and configure</li>
                </ul>
                <p>The wizard features smooth animations, real-time validation, and AJAX-powered setup (8-10 seconds).</p>
            </section>

            <!-- Configuration -->
            <section id="configuration" class="docs-section">
                <h2>Configuration</h2>

                <h3>Admin Pages</h3>
                <p>HubACP adds a top-level menu with modern navigation:</p>
                <ul class="docs-list">
                    <li><strong>Dashboard</strong> - Overview, onboarding checklist, quick start guide, stats (Pro)</li>
                    <li><strong>Settings</strong> - Technical configuration with 8 tabs (submenu)</li>
                </ul>

                <h3>Settings Tabs</h3>
                <p>Access via <strong>HubACP → Settings</strong>:</p>
                <ol class="docs-list">
                    <li><strong>Webhooks</strong> - Configure OpenAI webhook URL (Free & Pro)</li>
                    <li><strong>Shipping</strong> - Set delivery time estimates (Free & Pro)</li>
                    <li><strong>Feed</strong> - Product feed settings (Free & Pro)</li>
                    <li><strong>Diagnostics</strong> - 9 built-in testing tools (Free & Pro)</li>
                    <li><strong>Payments</strong> - Choose payment mode (Pro only)</li>
                    <li><strong>👤 Account</strong> - Manage license and billing via Freemius (Free & Pro)</li>
                    <li><strong>🚀 Upgrade to Pro</strong> - Modal checkout experience (Free only)</li>
                    <li><strong>💬 Support</strong> - Priority email support (Pro only)</li>
                </ol>

                <h3>Onboarding Checklist (Dashboard)</h3>
                <p>Interactive checklist tracks your setup progress:</p>
                <ul class="docs-list">
                    <li>✅ <strong>Step 1:</strong> Plugin Activated (auto-complete)</li>
                    <li>✅ <strong>Step 2:</strong> OpenAI Merchant Approval (manual checkbox)</li>
                    <li>✅ <strong>Step 3:</strong> Webhook Secret Configured (validated)</li>
                    <li>✅ <strong>Step 4:</strong> OpenAI Webhook URL Set (optional)</li>
                    <li>✅ <strong>Step 5:</strong> Integration Tested (diagnostics required)</li>
                </ul>
                <p>Progress shows "X of 5 complete" with visual bar. Celebration animation when 100% complete!</p>

                <h3>Generate Signing Secret</h3>
                <p>In <strong>HubACP → Settings → API Configuration</strong>, generate your webhook signing secret.</p>

                <div class="docs-code-block">
                    <div class="docs-code-header">
                        <span>Example Signing Secret</span>
                    </div>
                    <pre><code>whsec_abc123def456ghi789jkl012mno345pqr678</code></pre>
                </div>

                <div class="docs-callout docs-callout-warning">
                    <h4>🔐 Security Critical</h4>
                    <p>Your signing secret is used for HMAC-SHA256 authentication (same as Stripe). Store it securely using environment variables. Never commit to version control or expose in client-side code.</p>
                </div>

                <h3>Configure OpenAI Webhook URL</h3>
                <p>Provide your store's webhook endpoint to OpenAI:</p>

                <div class="docs-code-block">
                    <div class="docs-code-header">
                        <span>Your Store's Webhook URL</span>
                    </div>
                    <pre><code>https://yourstore.com/wp-json/acp/v1/webhooks</code></pre>
                </div>

                <h3>Diagnostic Tools</h3>
                <p>Test your integration without writing code (<strong>Settings → Diagnostics</strong>):</p>
                <ol class="docs-list">
                    <li><strong>Test REST API</strong> - Verify API connectivity</li>
                    <li><strong>Test Signature Verification</strong> - Verify HMAC algorithm</li>
                    <li><strong>Test Create Checkout</strong> - Create test session</li>
                    <li><strong>Test Update Checkout</strong> - Update with address</li>
                    <li><strong>Test Complete Checkout</strong> - Complete and create order</li>
                    <li><strong>Test Webhook</strong> - Send test webhook</li>
                    <li><strong>Clear Caches</strong> - Clear shipping/product caches</li>
                    <li><strong>View API Logs</strong> - Debug API requests</li>
                    <li><strong>System Info</strong> - PHP version, extensions, permissions</li>
                </ol>
            </section>

            <!-- API Overview -->
            <section id="api-overview" class="docs-section">
                <h2>API Overview</h2>
                <p>HubACP provides 8 REST API endpoints compatible with OpenAI's Agentic Commerce Protocol. The API follows REST principles with predictable URLs, standard HTTP methods, and JSON responses.</p>

                <h3>Base URL</h3>
                <div class="docs-code-block">
                    <pre><code>https://yourstore.com/wp-json/acp/v1/</code></pre>
                </div>

                <h3>All Endpoints</h3>
                <table class="docs-table">
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Endpoint</th>
                            <th>Description</th>
                            <th>Plan</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>GET</code></td>
                            <td><code>/acp/v1</code></td>
                            <td>API information</td>
                            <td>Free/Pro</td>
                        </tr>
                        <tr>
                            <td><code>GET</code></td>
                            <td><code>/acp/v1/feed</code></td>
                            <td>Product catalog feed</td>
                            <td>Free/Pro</td>
                        </tr>
                        <tr>
                            <td><code>GET</code></td>
                            <td><code>/acp/v1/products</code></td>
                            <td>List products (paginated)</td>
                            <td>Free/Pro</td>
                        </tr>
                        <tr>
                            <td><code>GET</code></td>
                            <td><code>/acp/v1/products/{id}</code></td>
                            <td>Get product details</td>
                            <td>Free/Pro</td>
                        </tr>
                        <tr>
                            <td><code>POST</code></td>
                            <td><code>/acp/v1/checkout-sessions</code></td>
                            <td>Create checkout session</td>
                            <td><strong>Pro</strong></td>
                        </tr>
                        <tr>
                            <td><code>POST</code></td>
                            <td><code>/acp/v1/checkout-sessions/{id}</code></td>
                            <td>Update session</td>
                            <td><strong>Pro</strong></td>
                        </tr>
                        <tr>
                            <td><code>POST</code></td>
                            <td><code>/acp/v1/checkout-sessions/{id}/complete</code></td>
                            <td>Complete checkout</td>
                            <td><strong>Pro</strong></td>
                        </tr>
                        <tr>
                            <td><code>GET</code></td>
                            <td><code>/acp/v1/checkout-sessions/{id}</code></td>
                            <td>Get session state</td>
                            <td><strong>Pro</strong></td>
                        </tr>
                        <tr>
                            <td><code>POST</code></td>
                            <td><code>/acp/v1/checkout-sessions/{id}/cancel</code></td>
                            <td>Cancel session</td>
                            <td><strong>Pro</strong></td>
                        </tr>
                    </tbody>
                </table>

                <h3>Free vs Pro Features</h3>
                <div class="docs-feature-grid">
                    <div class="docs-feature-card">
                        <h4>🆓 Free Version</h4>
                        <ul>
                            <li>Display up to <strong>3 products</strong></li>
                            <li>Product browsing & search</li>
                            <li>Basic API access</li>
                            <li>Setup wizard</li>
                            <li>Diagnostic tools</li>
                        </ul>
                    </div>
                    <div class="docs-feature-card">
                        <h4>🚀 Pro Version ($12/mo)</h4>
                        <ul>
                            <li><strong>Unlimited products</strong></li>
                            <li><strong>Full checkout API</strong></li>
                            <li><strong>Payment processing</strong></li>
                            <li>Real-time webhooks</li>
                            <li>Priority email support</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Authentication -->
            <section id="authentication" class="docs-section">
                <h2>Authentication</h2>
                <p>HubACP uses <strong>HMAC-SHA256 signature authentication</strong> - the same enterprise-grade security standard used by Stripe, GitHub, and other payment platforms.</p>

                <h3>Required Headers</h3>
                <div class="docs-code-block">
                    <div class="docs-code-header">
                        <span>HTTP Request Headers</span>
                    </div>
                    <pre><code>X-ACP-Signature: <hmac_signature>
X-ACP-Timestamp: <unix_timestamp>
Content-Type: application/json</code></pre>
                </div>

                <h3>Security Features</h3>
                <ul class="docs-list">
                    <li><strong>HMAC-SHA256 Signatures</strong> - Cryptographically verify every request</li>
                    <li><strong>Timestamp Validation</strong> - 5-minute tolerance window prevents replay attacks</li>
                    <li><strong>Rate Limiting</strong> - Protection against abuse</li>
                    <li><strong>Idempotency Keys</strong> - Prevent duplicate orders from retries</li>
                    <li><strong>Signature Verification</strong> - All webhooks signed with HMAC</li>
                </ul>

                <h3>Generating Request Signature</h3>
                <p>All API requests must include a signature of: <code>timestamp.request_body</code></p>

                <div class="docs-code-block">
                    <div class="docs-code-header">
                        <span>Bash Example (using OpenSSL)</span>
                    </div>
                    <pre><code>#!/bin/bash

SECRET="your_webhook_signing_secret"
TIMESTAMP=$(date +%s)
BODY='{"items":[{"id":"123","quantity":1}]}'

# Generate signature
SIGNATURE=$(echo -n "${TIMESTAMP}.${BODY}" | \
  openssl dgst -sha256 -hmac "$SECRET" | \
  cut -d' ' -f2)

# Make request
curl -X POST "https://yourstore.com/wp-json/acp/v1/checkout-sessions" \
  -H "X-ACP-Signature: $SIGNATURE" \
  -H "X-ACP-Timestamp: $TIMESTAMP" \
  -H "Content-Type: application/json" \
  -d "$BODY"</code></pre>
                </div>

                <div class="docs-code-block">
                    <div class="docs-code-header">
                        <span>JavaScript/Node.js Example</span>
                    </div>
                    <pre><code>const crypto = require('crypto');

const SECRET = process.env.HUBACP_SECRET;
const timestamp = Math.floor(Date.now() / 1000);
const body = JSON.stringify({ items: [{ id: "123", quantity: 1 }] });

// Generate HMAC signature
const payload = `${timestamp}.${body}`;
const signature = crypto
  .createHmac('sha256', SECRET)
  .update(payload)
  .digest('hex');

// Make API request
const response = await fetch('https://yourstore.com/wp-json/acp/v1/checkout-sessions', {
  method: 'POST',
  headers: {
    'X-ACP-Signature': signature,
    'X-ACP-Timestamp': timestamp.toString(),
    'Content-Type': 'application/json'
  },
  body: body
});</code></pre>
                </div>

                <div class="docs-code-block">
                    <div class="docs-code-header">
                        <span>Python Example</span>
                    </div>
                    <pre><code>import hmac
import hashlib
import json
import time
import os

SECRET = os.getenv('HUBACP_SECRET')
timestamp = str(int(time.time()))
body = json.dumps({"items": [{"id": "123", "quantity": 1}]})

# Generate HMAC signature
payload = f"{timestamp}.{body}"
signature = hmac.new(
    SECRET.encode(),
    payload.encode(),
    hashlib.sha256
).hexdigest()

# Make API request
headers = {
    'X-ACP-Signature': signature,
    'X-ACP-Timestamp': timestamp,
    'Content-Type': 'application/json'
}

response = requests.post(
    'https://yourstore.com/wp-json/acp/v1/checkout-sessions',
    headers=headers,
    data=body
)</code></pre>
                </div>

                <div class="docs-callout docs-callout-warning">
                    <h4>⚠️ Timestamp Validation</h4>
                    <p>Requests with timestamps older than 5 minutes are rejected to prevent replay attacks. Ensure your system clock is synchronized with NTP.</p>
                </div>
            </section>

            <!-- API Endpoints -->
            <section id="endpoints" class="docs-section">
                <h2>API Endpoints</h2>

                <h3>Products API</h3>
                <div class="docs-endpoint">
                    <div class="docs-endpoint-header">
                        <span class="docs-method docs-method-get">GET</span>
                        <code>/wp-json/acp/v1/products</code>
                    </div>
                    <p>Retrieve a paginated list of products from your catalog.</p>

                    <h4>Query Parameters</h4>
                    <table class="docs-table">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>search</code></td>
                                <td>string</td>
                                <td>Search query for product name or description</td>
                            </tr>
                            <tr>
                                <td><code>category</code></td>
                                <td>string</td>
                                <td>Filter by category slug</td>
                            </tr>
                            <tr>
                                <td><code>page</code></td>
                                <td>integer</td>
                                <td>Page number (default: 1)</td>
                            </tr>
                            <tr>
                                <td><code>per_page</code></td>
                                <td>integer</td>
                                <td>Items per page (default: 20, max: 100)</td>
                            </tr>
                            <tr>
                                <td><code>orderby</code></td>
                                <td>string</td>
                                <td>Sort by: date, title, price (default: date)</td>
                            </tr>
                            <tr>
                                <td><code>order</code></td>
                                <td>string</td>
                                <td>Sort order: asc, desc (default: desc)</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>Example Request</h4>
                    <div class="docs-code-block">
                        <pre><code>GET /wp-json/acp/v1/products?search=shirt&per_page=10
X-WCP-API-Key: wcp_abc123def456ghi789</code></pre>
                    </div>

                    <h4>Example Response</h4>
                    <div class="docs-code-block">
                        <pre><code>{
  "products": [
    {
      "id": 123,
      "name": "Classic Cotton T-Shirt",
      "slug": "classic-cotton-tshirt",
      "price": "29.99",
      "regular_price": "39.99",
      "sale_price": "29.99",
      "on_sale": true,
      "stock_status": "instock",
      "stock_quantity": 50,
      "description": "Comfortable 100% cotton t-shirt",
      "short_description": "Classic everyday tee",
      "images": [
        {
          "src": "https://your-store.com/wp-content/uploads/tshirt.jpg",
          "alt": "Classic T-Shirt"
        }
      ],
      "categories": ["Clothing", "T-Shirts"],
      "variations": []
    }
  ],
  "pagination": {
    "total": 150,
    "pages": 15,
    "current_page": 1,
    "per_page": 10
  }
}</code></pre>
                    </div>
                </div>

                <h3>Checkout Sessions API (Pro Only)</h3>
                <div class="docs-endpoint">
                    <div class="docs-endpoint-header">
                        <span class="docs-method docs-method-post">POST</span>
                        <code>/wp-json/acp/v1/checkout-sessions</code>
                    </div>
                    <p>Create a new checkout session with cart items.</p>

                    <h4>Request Body</h4>
                    <div class="docs-code-block">
                        <pre><code>{
  "items": [
    {
      "product_id": 123,
      "quantity": 2,
      "variation_id": null
    }
  ],
  "customer": {
    "email": "customer@example.com",
    "first_name": "John",
    "last_name": "Doe"
  },
  "idempotency_key": "unique-request-id-123"
}</code></pre>
                    </div>

                    <h4>Example Response</h4>
                    <div class="docs-code-block">
                        <pre><code>{
  "session_id": "cs_abc123",
  "status": "pending",
  "items": [...],
  "subtotal": "59.98",
  "tax": "5.40",
  "shipping": "0.00",
  "total": "65.38",
  "expires_at": "2025-01-15T18:30:00Z"
}</code></pre>
                    </div>
                </div>

                <div class="docs-endpoint">
                    <div class="docs-endpoint-header">
                        <span class="docs-method docs-method-post">POST</span>
                        <code>/wp-json/acp/v1/checkout-sessions/{id}/shipping</code>
                    </div>
                    <p>Calculate shipping options for a checkout session.</p>

                    <h4>Request Body</h4>
                    <div class="docs-code-block">
                        <pre><code>{
  "shipping_address": {
    "first_name": "John",
    "last_name": "Doe",
    "address_1": "123 Main St",
    "city": "New York",
    "state": "NY",
    "postcode": "10001",
    "country": "US"
  }
}</code></pre>
                    </div>

                    <h4>Example Response</h4>
                    <div class="docs-code-block">
                        <pre><code>{
  "shipping_methods": [
    {
      "id": "flat_rate",
      "label": "Flat Rate",
      "cost": "10.00",
      "delivery_time": "3-5 business days"
    },
    {
      "id": "express",
      "label": "Express Shipping",
      "cost": "25.00",
      "delivery_time": "1-2 business days"
    }
  ]
}</code></pre>
                    </div>
                </div>

                <div class="docs-endpoint">
                    <div class="docs-endpoint-header">
                        <span class="docs-method docs-method-post">POST</span>
                        <code>/wp-json/acp/v1/checkout-sessions/{id}/complete</code>
                    </div>
                    <p>Finalize the checkout and create a WooCommerce order.</p>

                    <h4>Request Body</h4>
                    <div class="docs-code-block">
                        <pre><code>{
  "payment_method": "stripe",
  "payment_intent_id": "pi_xyz123",
  "billing_address": {
    "first_name": "John",
    "last_name": "Doe",
    "address_1": "123 Main St",
    "city": "New York",
    "state": "NY",
    "postcode": "10001",
    "country": "US",
    "email": "customer@example.com",
    "phone": "+1234567890"
  },
  "shipping_method_id": "flat_rate"
}</code></pre>
                    </div>

                    <h4>Example Response</h4>
                    <div class="docs-code-block">
                        <pre><code>{
  "order_id": 456,
  "order_number": "456",
  "status": "processing",
  "total": "75.38",
  "customer": {...},
  "items": [...],
  "created_at": "2025-01-15T15:30:00Z"
}</code></pre>
                    </div>
                </div>
            </section>

            <!-- Webhooks -->
            <section id="webhooks" class="docs-section">
                <h2>Webhooks (Pro Only)</h2>
                <p>Webhooks provide real-time notifications when events occur in your WooCommerce store. Perfect for keeping ChatGPT synchronized with order status changes.</p>

                <h3>Supported Events (6 Types)</h3>
                <table class="docs-table">
                    <thead>
                        <tr>
                            <th>Event</th>
                            <th>Description</th>
                            <th>When Triggered</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>order.created</code></td>
                            <td>A new order has been created</td>
                            <td>Immediately after checkout completion</td>
                        </tr>
                        <tr>
                            <td><code>order.updated</code></td>
                            <td>An order status has changed</td>
                            <td>Any status transition</td>
                        </tr>
                        <tr>
                            <td><code>order.processing</code></td>
                            <td>Order is being processed</td>
                            <td>Status changed to "processing"</td>
                        </tr>
                        <tr>
                            <td><code>order.completed</code></td>
                            <td>Order has been fulfilled</td>
                            <td>Status changed to "completed"</td>
                        </tr>
                        <tr>
                            <td><code>order.cancelled</code></td>
                            <td>Order has been cancelled</td>
                            <td>Status changed to "cancelled"</td>
                        </tr>
                        <tr>
                            <td><code>order.refunded</code></td>
                            <td>Refund has been issued</td>
                            <td>Full or partial refund processed</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Webhook Features</h3>
                <ul class="docs-list">
                    <li><strong>Automatic Retry</strong> - Exponential backoff with 5 retry attempts</li>
                    <li><strong>Signed Payloads</strong> - HMAC-SHA256 signature on every webhook</li>
                    <li><strong>Event Logging</strong> - Complete delivery history in WP admin</li>
                    <li><strong>OpenAI ACP Compliant</strong> - Follows official specification</li>
                    <li><strong>Background Processing</strong> - Uses WC Action Scheduler (non-blocking)</li>
                </ul>

                <h3>Webhook Payload</h3>
                <div class="docs-code-block">
                    <pre><code>{
  "event": "order.created",
  "timestamp": "2025-01-15T15:30:00Z",
  "data": {
    "order_id": 456,
    "order_number": "456",
    "status": "processing",
    "total": "75.38",
    "customer": {
      "email": "customer@example.com",
      "first_name": "John",
      "last_name": "Doe"
    },
    "items": [...]
  }
}</code></pre>
                </div>

                <h3>Verifying Webhook Signatures</h3>
                <p>All webhooks include both <code>X-Signature</code> and <code>X-ACP-Signature</code> headers. Always verify to ensure authenticity.</p>

                <div class="docs-code-block">
                    <div class="docs-code-header">
                        <span>Node.js Example</span>
                    </div>
                    <pre><code>const crypto = require('crypto');

function verifyWebhook(payload, signature, secret) {
  const expectedSignature = crypto
    .createHmac('sha256', secret)
    .update(payload)
    .digest('hex');

  return signature === expectedSignature;
}

// Express.js webhook endpoint
app.post('/webhooks/hubacp', express.raw({ type: 'application/json' }), (req, res) => {
  const signature = req.headers['x-acp-signature'] || req.headers['x-signature'];
  const payload = req.body.toString('utf8');

  if (!verifyWebhook(payload, signature, process.env.HUBACP_SECRET)) {
    return res.status(401).json({ error: 'Invalid signature' });
  }

  const event = JSON.parse(payload);
  console.log('Received event:', event.type, 'for order', event.data.order_id);

  // Process webhook asynchronously
  processWebhookAsync(event);

  // Respond immediately
  res.status(200).json({ received: true });
});</code></pre>
                </div>

                <h3>Automatic Retry Policy</h3>
                <p>If your endpoint returns non-2xx status, HubACP retries with exponential backoff:</p>
                <table class="docs-table">
                    <thead>
                        <tr>
                            <th>Attempt</th>
                            <th>Delay</th>
                            <th>Total Time Elapsed</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1 (initial)</td>
                            <td>Immediate</td>
                            <td>0 seconds</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>1 minute</td>
                            <td>1 minute</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>5 minutes</td>
                            <td>6 minutes</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>15 minutes</td>
                            <td>21 minutes</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>1 hour</td>
                            <td>~1.4 hours</td>
                        </tr>
                        <tr>
                            <td>6 (final)</td>
                            <td>6 hours</td>
                            <td>~7.4 hours</td>
                        </tr>
                    </tbody>
                </table>

                <div class="docs-callout docs-callout-info">
                    <h4>💡 Best Practice</h4>
                    <p>Always respond with 200 OK immediately, then process webhooks asynchronously. This prevents timeouts and ensures reliable delivery.</p>
                </div>
            </section>

            <!-- Security -->
            <section id="security" class="docs-section">
                <h2>Security Best Practices</h2>

                <div class="docs-callout docs-callout-warning">
                    <h4>🔐 Security Checklist</h4>
                    <ul>
                        <li>✅ Always use HTTPS in production</li>
                        <li>✅ Store API keys and signing secrets securely (use environment variables)</li>
                        <li>✅ Verify HMAC signatures on all webhooks</li>
                        <li>✅ Use idempotency keys to prevent duplicate orders</li>
                        <li>✅ Implement rate limiting on your webhook endpoints</li>
                        <li>✅ Regularly rotate your API credentials</li>
                        <li>✅ Monitor API usage for suspicious activity</li>
                    </ul>
                </div>

                <h3>Idempotency Keys</h3>
                <p>To prevent duplicate orders from network retries, include an idempotency key with checkout requests:</p>

                <div class="docs-code-block">
                    <pre><code>{
  "items": [...],
  "customer": {...},
  "idempotency_key": "unique-request-id-" + Date.now()
}</code></pre>
                </div>

                <p>If the same idempotency key is used within 24 hours, HubACP will return the original response instead of creating a duplicate.</p>
            </section>

            <!-- Code Examples -->
            <section id="examples" class="docs-section">
                <h2>Code Examples</h2>

                <h3>Complete Purchase Flow</h3>
                <div class="docs-code-block">
                    <div class="docs-code-header">
                        <span>JavaScript/TypeScript</span>
                    </div>
                    <pre><code>const HubACPClient = require('hubacp-client');

const client = new HubACPClient({
  baseUrl: 'https://your-store.com',
  apiKey: process.env.HUBACP_API_KEY,
  signingSecret: process.env.HUBACP_SIGNING_SECRET
});

async function completePurchase() {
  // 1. Search for products
  const products = await client.products.list({
    search: 'laptop',
    per_page: 5
  });

  console.log(`Found ${products.pagination.total} laptops`);

  // 2. Create checkout session
  const session = await client.checkout.createSession({
    items: [
      { product_id: products.products[0].id, quantity: 1 }
    ],
    customer: {
      email: 'customer@example.com',
      first_name: 'John',
      last_name: 'Doe'
    },
    idempotency_key: `order-${Date.now()}`
  });

  console.log(`Session created: ${session.session_id}`);

  // 3. Calculate shipping
  const shipping = await client.checkout.calculateShipping(session.session_id, {
    shipping_address: {
      first_name: 'John',
      last_name: 'Doe',
      address_1: '123 Main St',
      city: 'New York',
      state: 'NY',
      postcode: '10001',
      country: 'US'
    }
  });

  console.log('Shipping options:', shipping.shipping_methods);

  // 4. Complete the order
  const order = await client.checkout.complete(session.session_id, {
    payment_method: 'stripe',
    payment_intent_id: 'pi_123abc',
    billing_address: { /* ... */ },
    shipping_method_id: shipping.shipping_methods[0].id
  });

  console.log(`Order created: #${order.order_number}`);
  return order;
}</code></pre>
                </div>

                <h3>Python Example</h3>
                <div class="docs-code-block">
                    <div class="docs-code-header">
                        <span>Python</span>
                    </div>
                    <pre><code>from hubacp import HubACPClient
import os

client = HubACPClient(
    base_url='https://your-store.com',
    api_key=os.getenv('HUBACP_API_KEY'),
    signing_secret=os.getenv('HUBACP_SIGNING_SECRET')
)

# Search products
products = client.products.list(search='laptop', per_page=5)
print(f"Found {products['pagination']['total']} laptops")

# Create checkout session
session = client.checkout.create_session(
    items=[
        {'product_id': products['products'][0]['id'], 'quantity': 1}
    ],
    customer={
        'email': 'customer@example.com',
        'first_name': 'John',
        'last_name': 'Doe'
    },
    idempotency_key=f"order-{int(time.time())}"
)

# Complete order
order = client.checkout.complete(
    session['session_id'],
    payment_method='stripe',
    payment_intent_id='pi_123abc',
    billing_address={...},
    shipping_method_id='flat_rate'
)

print(f"Order created: #{order['order_number']}")</code></pre>
                </div>
            </section>

            <!-- Troubleshooting -->
            <section id="troubleshooting" class="docs-section">
                <h2>Troubleshooting</h2>

                <h3>Common Issues</h3>

                <div class="docs-troubleshoot">
                    <h4>401 Unauthorized Error</h4>
                    <p><strong>Cause:</strong> Invalid API key or missing authentication header.</p>
                    <p><strong>Solution:</strong> Verify your API key is correct and included in the <code>X-WCP-API-Key</code> header.</p>
                </div>

                <div class="docs-troubleshoot">
                    <h4>403 Forbidden - Invalid Signature</h4>
                    <p><strong>Cause:</strong> HMAC signature doesn't match the request body.</p>
                    <p><strong>Solution:</strong> Ensure you're using the correct signing secret and computing the HMAC correctly. The signature must be generated from the exact request body string.</p>
                </div>

                <div class="docs-troubleshoot">
                    <h4>404 Product Not Found</h4>
                    <p><strong>Cause:</strong> Product ID doesn't exist or is not published.</p>
                    <p><strong>Solution:</strong> Check the product exists in WooCommerce and is published. Only published products are available via the API.</p>
                </div>

                <div class="docs-troubleshoot">
                    <h4>422 Session Expired</h4>
                    <p><strong>Cause:</strong> Checkout session has expired (sessions expire after 1 hour).</p>
                    <p><strong>Solution:</strong> Create a new checkout session. Don't store session IDs for long periods.</p>
                </div>

                <div class="docs-troubleshoot">
                    <h4>429 Rate Limit Exceeded</h4>
                    <p><strong>Cause:</strong> Too many requests in a short time period.</p>
                    <p><strong>Solution:</strong> Implement exponential backoff and respect rate limit headers. Free plan: 60 requests/minute. Pro plan: 300 requests/minute.</p>
                </div>

                <h3>Debug Mode</h3>
                <p>Enable debug mode in the HubACP settings to log all API requests and responses:</p>
                <ol class="docs-list">
                    <li>Go to <strong>WooCommerce → Settings → HubACP</strong></li>
                    <li>Enable <strong>Debug Mode</strong></li>
                    <li>Check logs at <strong>WooCommerce → Status → Logs</strong></li>
                </ol>

                <div class="docs-callout docs-callout-warning">
                    <p><strong>⚠️ Warning:</strong> Debug mode can expose sensitive data. Only enable it temporarily for troubleshooting and disable it in production.</p>
                </div>
            </section>

            <!-- FAQ -->
            <section id="faq" class="docs-section">
                <h2>Frequently Asked Questions</h2>

                <div class="docs-faq-item">
                    <h4>What exactly does HubACP do?</h4>
                    <p>HubACP transforms your WooCommerce store into an AI-ready commerce platform. It provides a secure REST API that enables ChatGPT to browse your products, create shopping carts, calculate shipping and taxes, and complete purchases - all through natural conversation. It implements OpenAI's Agentic Commerce Protocol (ACP).</p>
                </div>

                <div class="docs-faq-item">
                    <h4>What's the difference between Free and Pro?</h4>
                    <p><strong>Free version:</strong> ChatGPT can browse up to 3 products (read-only). <strong>Pro version ($12/month):</strong> Unlimited products + full checkout integration including payment processing, shipping calculation, tax calculation, order creation, and real-time webhooks.</p>
                </div>

                <div class="docs-faq-item">
                    <h4>How does checkout work through ChatGPT?</h4>
                    <p>When a customer tells ChatGPT they want to buy something, ChatGPT uses our API to: (1) Create a checkout session with their items, (2) Calculate shipping costs to their address, (3) Calculate applicable taxes, (4) Process payment securely, (5) Create the order in your WooCommerce store. You get notified via webhook and the order appears in WooCommerce just like a normal order.</p>
                </div>

                <div class="docs-faq-item">
                    <h4>What are the system requirements?</h4>
                    <p><strong>PHP 8.1+</strong>, <strong>WordPress 6.5+</strong>, and <strong>WooCommerce 8.0+</strong>. You'll also need to register as an OpenAI merchant (free) and configure the API credentials. HTTPS/SSL certificate required for production.</p>
                </div>

                <div class="docs-faq-item">
                    <h4>How secure is the API?</h4>
                    <p>Very secure. We use <strong>HMAC-SHA256 signature authentication</strong> (same as Stripe), <strong>timestamp validation</strong> with 5-minute tolerance window, <strong>rate limiting</strong>, and <strong>idempotency keys</strong>. All API requests must be cryptographically signed with your secret key.</p>
                </div>

                <div class="docs-faq-item">
                    <h4>Can I use HubACP with other AI agents besides ChatGPT?</h4>
                    <p>Yes! HubACP is AI-agnostic and OpenAI ACP compliant. Any system that can make authenticated HTTP requests can integrate - Claude, custom AI agents, headless commerce platforms, etc.</p>
                </div>

                <div class="docs-faq-item">
                    <h4>How do payments work?</h4>
                    <p>ChatGPT processes payment through its own payment infrastructure, then passes the payment confirmation ID to our API. HubACP creates the order in WooCommerce with "Processing" status. Your existing WooCommerce payment gateways are not used for ChatGPT orders.</p>
                </div>

                <div class="docs-faq-item">
                    <h4>Can I test without ChatGPT integration?</h4>
                    <p>Yes! HubACP includes 9 built-in diagnostic tools in <strong>Settings → Diagnostics</strong>. You can test the entire checkout flow, webhooks, and API endpoints without writing any code or connecting ChatGPT.</p>
                </div>

                <div class="docs-faq-item">
                    <h4>How do I upgrade from Free to Pro?</h4>
                    <p>Click <strong>🚀 Upgrade to Pro</strong> in the admin menu, complete the Freemius checkout (secure payment via Stripe/PayPal), download the Pro ZIP, and install it (it overrides the Free version). License activates automatically - no manual key entry needed.</p>
                </div>

                <div class="docs-faq-item">
                    <h4>Do you offer refunds?</h4>
                    <p>Yes, we offer a <strong>14-day money-back guarantee</strong> on all Pro purchases. No questions asked.</p>
                </div>

                <div class="docs-faq-item">
                    <h4>Are webhooks guaranteed to be delivered?</h4>
                    <p>We make best effort with 6 automatic retry attempts over 7+ hours. However, always implement idempotency on your end. For critical integrations, consider polling the order status API as a backup.</p>
                </div>

                <div class="docs-faq-item">
                    <h4>Is HubACP compatible with my WooCommerce plugins?</h4>
                    <p>HubACP works with standard WooCommerce functionality. Tax calculators, shipping methods, and most plugins work normally. Variable products, product bundles, and subscriptions have varying support - test in your staging environment first.</p>
                </div>
            </section>

            <!-- Support -->
            <section id="support" class="docs-section">
                <h2>Need Help?</h2>
                <div class="docs-support-grid">
                    <div class="docs-support-card">
                        <h4>📧 Email Support</h4>
                        <p>Pro customers get priority email support with 24-hour response time.</p>
                        <a href="mailto:support@hubacp.com" class="btn-outline">Contact Support</a>
                    </div>
                    <div class="docs-support-card">
                        <h4>💬 Community Forum</h4>
                        <p>Join our community forum to ask questions and share experiences.</p>
                        <a href="#" class="btn-outline">Visit Forum</a>
                    </div>
                    <div class="docs-support-card">
                        <h4>🐛 Report a Bug</h4>
                        <p>Found a bug? Report it on GitHub and help us improve HubACP.</p>
                        <a href="https://github.com/yairbarak22/HubACP/issues" class="btn-outline" target="_blank">Report Issue</a>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-column">
                    <div class="footer-logo">HubACP</div>
                    <p class="footer-copyright">© 2025 HubACP. All rights reserved.</p>
                </div>

                <div class="footer-column">
                    <h4 class="footer-heading">Product</h4>
                    <ul class="footer-links">
                        <li><a href="index.html#features">Features</a></li>
                        <li><a href="index.html#pricing">Pricing</a></li>
                        <li><a href="https://wordpress.org/plugins/hubacp/">Download Free</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h4 class="footer-heading">Resources</h4>
                    <ul class="footer-links">
                        <li><a href="docs.html">Documentation</a></li>
                        <li><a href="#support">Support</a></li>
                        <li><a href="#blog">Blog</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h4 class="footer-heading">Legal</h4>
                    <ul class="footer-links">
                        <li><a href="#terms">Terms of Service</a></li>
                        <li><a href="#privacy">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="script.js"></script>
</body>
</html>
